<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: Nanoc::Filter
  
    &mdash; Documentation by YARD 0.8.5.2
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" media="screen" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '../';
  framesUrl = "../frames.html#!" + escape(window.location.href);
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="../_index.html">Index (F)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../Nanoc.html" title="Nanoc (module)">Nanoc</a></span></span>
     &raquo; 
    <span class="title">Filter</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="../method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="../file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><h1>Class: Nanoc::Filter
  <span class="abstract note title">Abstract</span>
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName"><span class='object_link'><a href="Context.html" title="Nanoc::Context (class)">Context</a></span></span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next"><span class='object_link'><a href="Context.html" title="Nanoc::Context (class)">Context</a></span></li>
          
            <li class="next">Nanoc::Filter</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
      <dt class="r2">Extended by:</dt>
      <dd class="r2"><span class='object_link'><a href="PluginRegistry/PluginMethods.html" title="Nanoc::PluginRegistry::PluginMethods (module)">PluginRegistry::PluginMethods</a></span></dd>
      
    
  
    
  
  
  
    <dt class="r1 last">Defined in:</dt>
    <dd class="r1 last">lib/nanoc/base/compilation/filter.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <div class="note abstract">
  <strong>This class is abstract.</strong>
  <div class='inline'><p>Subclass and override <span class='object_link'><a href="#run-instance_method" title="Nanoc::Filter#run (method)">#run</a></span> to implement a custom filter.</p>
</div>
</div>
<p>Nanoc::Filter is responsible for filtering items. It is the superclass
for all textual filters.</p>

<p>A filter instance should only be used once. Filters should not be reused
since they store state.</p>

<p>When creating a filter with a hash containing assigned variables, those
variables will be made available in the <code>@assigns</code> instance variable and
the <span class='object_link'><a href="#assigns-instance_method" title="Nanoc::Filter#assigns (method)">#assigns</a></span> method. The assigns itself will also be available as
instance variables and instance methods.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'><p>Accessing assigns in different ways</p>
</div></p>
      
      <pre class="example code"><code>
<span class='id identifier rubyid_filter'>filter</span> <span class='op'>=</span> <span class='const'>SomeFilter</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='lbrace'>{</span> <span class='symbol'>:foo</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>bar</span><span class='tstring_end'>'</span></span> <span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='id identifier rubyid_filter'>filter</span><span class='period'>.</span><span class='id identifier rubyid_instance_eval'>instance_eval</span> <span class='lbrace'>{</span> <span class='ivar'>@assigns</span><span class='lbracket'>[</span><span class='symbol'>:foo</span><span class='rbracket'>]</span> <span class='rbrace'>}</span>
  <span class='comment'># =&gt; 'bar'
</span><span class='id identifier rubyid_filter'>filter</span><span class='period'>.</span><span class='id identifier rubyid_instance_eval'>instance_eval</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_assigns'>assigns</span><span class='lbracket'>[</span><span class='symbol'>:foo</span><span class='rbracket'>]</span> <span class='rbrace'>}</span>
  <span class='comment'># =&gt; 'bar'
</span><span class='id identifier rubyid_filter'>filter</span><span class='period'>.</span><span class='id identifier rubyid_instance_eval'>instance_eval</span> <span class='lbrace'>{</span> <span class='ivar'>@foo</span> <span class='rbrace'>}</span>
  <span class='comment'># =&gt; 'bar'
</span><span class='id identifier rubyid_filter'>filter</span><span class='period'>.</span><span class='id identifier rubyid_instance_eval'>instance_eval</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_foo'>foo</span> <span class='rbrace'>}</span>
  <span class='comment'># =&gt; 'bar'</span></code></pre>
    
  </div>


</div><div id="subclasses">
  <h2>Direct Known Subclasses</h2>
  <p class="children"><span class='object_link'><a href="Filters/AsciiDoc.html" title="Nanoc::Filters::AsciiDoc (class)">Nanoc::Filters::AsciiDoc</a></span>, <span class='object_link'><a href="Filters/BlueCloth.html" title="Nanoc::Filters::BlueCloth (class)">Nanoc::Filters::BlueCloth</a></span>, <span class='object_link'><a href="Filters/CodeRay.html" title="Nanoc::Filters::CodeRay (class)">Nanoc::Filters::CodeRay</a></span>, <span class='object_link'><a href="Filters/CoffeeScript.html" title="Nanoc::Filters::CoffeeScript (class)">Nanoc::Filters::CoffeeScript</a></span>, <span class='object_link'><a href="Filters/ColorizeSyntax.html" title="Nanoc::Filters::ColorizeSyntax (class)">Nanoc::Filters::ColorizeSyntax</a></span>, <span class='object_link'><a href="Filters/ERB.html" title="Nanoc::Filters::ERB (class)">Nanoc::Filters::ERB</a></span>, <span class='object_link'><a href="Filters/Erubis.html" title="Nanoc::Filters::Erubis (class)">Nanoc::Filters::Erubis</a></span>, <span class='object_link'><a href="Filters/Haml.html" title="Nanoc::Filters::Haml (class)">Nanoc::Filters::Haml</a></span>, <span class='object_link'><a href="Filters/Handlebars.html" title="Nanoc::Filters::Handlebars (class)">Nanoc::Filters::Handlebars</a></span>, <span class='object_link'><a href="Filters/Kramdown.html" title="Nanoc::Filters::Kramdown (class)">Nanoc::Filters::Kramdown</a></span>, <span class='object_link'><a href="Filters/Less.html" title="Nanoc::Filters::Less (class)">Nanoc::Filters::Less</a></span>, <span class='object_link'><a href="Filters/Markaby.html" title="Nanoc::Filters::Markaby (class)">Nanoc::Filters::Markaby</a></span>, <span class='object_link'><a href="Filters/Maruku.html" title="Nanoc::Filters::Maruku (class)">Nanoc::Filters::Maruku</a></span>, <span class='object_link'><a href="Filters/Mustache.html" title="Nanoc::Filters::Mustache (class)">Nanoc::Filters::Mustache</a></span>, <span class='object_link'><a href="Filters/Pandoc.html" title="Nanoc::Filters::Pandoc (class)">Nanoc::Filters::Pandoc</a></span>, <span class='object_link'><a href="Filters/RDiscount.html" title="Nanoc::Filters::RDiscount (class)">Nanoc::Filters::RDiscount</a></span>, <span class='object_link'><a href="Filters/RDoc.html" title="Nanoc::Filters::RDoc (class)">Nanoc::Filters::RDoc</a></span>, <span class='object_link'><a href="Filters/Rainpress.html" title="Nanoc::Filters::Rainpress (class)">Nanoc::Filters::Rainpress</a></span>, <span class='object_link'><a href="Filters/RedCloth.html" title="Nanoc::Filters::RedCloth (class)">Nanoc::Filters::RedCloth</a></span>, <span class='object_link'><a href="Filters/Redcarpet.html" title="Nanoc::Filters::Redcarpet (class)">Nanoc::Filters::Redcarpet</a></span>, <span class='object_link'><a href="Filters/RelativizePaths.html" title="Nanoc::Filters::RelativizePaths (class)">Nanoc::Filters::RelativizePaths</a></span>, <span class='object_link'><a href="Filters/RubyPants.html" title="Nanoc::Filters::RubyPants (class)">Nanoc::Filters::RubyPants</a></span>, <span class='object_link'><a href="Filters/Sass.html" title="Nanoc::Filters::Sass (class)">Nanoc::Filters::Sass</a></span>, <span class='object_link'><a href="Filters/Slim.html" title="Nanoc::Filters::Slim (class)">Nanoc::Filters::Slim</a></span>, <span class='object_link'><a href="Filters/Typogruby.html" title="Nanoc::Filters::Typogruby (class)">Nanoc::Filters::Typogruby</a></span>, <span class='object_link'><a href="Filters/UglifyJS.html" title="Nanoc::Filters::UglifyJS (class)">Nanoc::Filters::UglifyJS</a></span>, <span class='object_link'><a href="Filters/XSL.html" title="Nanoc::Filters::XSL (class)">Nanoc::Filters::XSL</a></span>, <span class='object_link'><a href="Filters/YUICompressor.html" title="Nanoc::Filters::YUICompressor (class)">Nanoc::Filters::YUICompressor</a></span></p>
</div>

  <h2>Constant Summary</h2>
  
    <dl class="constants">
      
        <dt id="TMP_BINARY_ITEMS_DIR-constant" class="">TMP_BINARY_ITEMS_DIR =
          <div class="docstring">
  <div class="discussion">
    <p>The path to the directory where temporary binary items are stored</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>tmp/binary_items</span><span class='tstring_end'>'</span></span></pre></dd>
      
    </dl>
  




  <h2>Instance Attribute Summary <small>(<a href="#" class="summary_toggle">collapse</a>)</small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#assigns-instance_method" title="#assigns (instance method)">- (Hash) <strong>assigns</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>A hash containing variables that will be made available during
filtering.</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Class Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#from_binary%3F-class_method" title="from_binary? (class method)">+ (Boolean) <strong>from_binary?</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>True if this filter can be applied to binary item
representations, false otherwise.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#requires-class_method" title="requires (class method)">+ (Object) <strong>requires</strong>(*requires) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#setup-class_method" title="setup (class method)">+ (void) <strong>setup</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Requires the filter’s required library if necessary.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#to_binary%3F-class_method" title="to_binary? (class method)">+ (Boolean) <strong>to_binary?</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>True if this filter results in a binary item
representation, false otherwise.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#type-class_method" title="type (class method)">+ (void) <strong>type</strong>(arg) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Sets the new type for the filter.</p>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#depend_on-instance_method" title="#depend_on (instance method)">- (void) <strong>depend_on</strong>(items) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Creates a dependency from the item that is currently being filtered onto
the given collection of items.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#filename-instance_method" title="#filename (instance method)">- (String) <strong>filename</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns the filename associated with the item that is being filtered.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (Filter) <strong>initialize</strong>(hash = {}) </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Creates a new filter that has access to the given assigns.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#output_filename-instance_method" title="#output_filename (instance method)">- (String) <strong>output_filename</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns a filename that is used to write data to.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#run-instance_method" title="#run (instance method)">- (String, void) <strong>run</strong>(content_or_filename, params = {}) </a>
    

    
  </span>
  
  
  
  
  <span class="abstract note title">abstract</span>
  
  

  
    <span class="summary_desc"><div class='inline'><p>Runs the filter on the given content or filename.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#setup_and_run-instance_method" title="#setup_and_run (instance method)">- (Object) <strong>setup_and_run</strong>(*args) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Sets up the filter and runs the filter.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="PluginRegistry/PluginMethods.html" title="Nanoc::PluginRegistry::PluginMethods (module)">PluginRegistry::PluginMethods</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="PluginRegistry/PluginMethods.html#all-instance_method" title="Nanoc::PluginRegistry::PluginMethods#all (method)">all</a></span>, <span class='object_link'><a href="PluginRegistry/PluginMethods.html#identifier-instance_method" title="Nanoc::PluginRegistry::PluginMethods#identifier (method)">identifier</a></span>, <span class='object_link'><a href="PluginRegistry/PluginMethods.html#identifiers-instance_method" title="Nanoc::PluginRegistry::PluginMethods#identifiers (method)">identifiers</a></span>, <span class='object_link'><a href="PluginRegistry/PluginMethods.html#named-instance_method" title="Nanoc::PluginRegistry::PluginMethods#named (method)">named</a></span>, <span class='object_link'><a href="PluginRegistry/PluginMethods.html#register-instance_method" title="Nanoc::PluginRegistry::PluginMethods#register (method)">register</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods inherited from <span class='object_link'><a href="Context.html" title="Nanoc::Context (class)">Context</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Context.html#get_binding-instance_method" title="Nanoc::Context#get_binding (method)">#get_binding</a></span></p>
<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="Nanoc::Filter (class)">Filter</a></span></tt>) <strong>initialize</strong>(hash = {}) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Creates a new filter that has access to the given assigns.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>hash</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Hash.html" title="Hash (class)">Hash</a></span></tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>A hash containing variables that should be made
available during filtering.</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


111
112
113
114</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc/base/compilation/filter.rb', line 111</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_hash'>hash</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='ivar'>@assigns</span> <span class='op'>=</span> <span class='id identifier rubyid_hash'>hash</span>
  <span class='kw'>super</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <div class="method_details first">
  <h3 class="signature first" id="assigns-instance_method">
  
    - (<tt><span class='object_link'><a href="../Hash.html" title="Hash (class)">Hash</a></span></tt>) <strong>assigns</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>A hash containing variables that will be made available during
filtering.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Hash.html" title="Hash (class)">Hash</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


38
39
40</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc/base/compilation/filter.rb', line 38</span>

<span class='kw'>def</span> <span class='id identifier rubyid_assigns'>assigns</span>
  <span class='ivar'>@assigns</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="from_binary?-class_method">
  
    + (<tt>Boolean</tt>) <strong>from_binary?</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>True if this filter can be applied to binary item
representations, false otherwise</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>True if this filter can be applied to binary item
representations, false otherwise</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


70
71
72</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc/base/compilation/filter.rb', line 70</span>

<span class='kw'>def</span> <span class='id identifier rubyid_from_binary?'>from_binary?</span>
  <span class='lparen'>(</span><span class='ivar'>@from</span> <span class='op'>||</span> <span class='symbol'>:text</span><span class='rparen'>)</span> <span class='op'>==</span> <span class='symbol'>:binary</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="requires-class_method">
  
    
      <span class="overload">+ (<tt>void</tt>) <strong>requires</strong>(*requires) </span>
    
      <span class="overload">+ (<tt><span class='object_link'><a href="../Enumerable.html" title="Enumerable (module)">Enumerable</a></span>&lt;<span class='object_link'><a href="../String.html" title="String (class)">String</a></span>&gt;</tt>) <strong>requires</strong> </span>
    
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    


  </div>
</div>
<div class="tags">
  
  <p class="tag_title">Overloads:</p>
  <ul class="overload">
    
      
      <li class="overload_item">
        <span class="signature">+ (<tt>void</tt>) <strong>requires</strong>(*requires) </span>
        <div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>Sets the required libraries for this filter.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>requires</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="../String.html" title="String (class)">String</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A list of library names that are required</p>
</div>
      
    </li>
  
</ul>


</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">+ (<tt><span class='object_link'><a href="../Enumerable.html" title="Enumerable (module)">Enumerable</a></span>&lt;<span class='object_link'><a href="../String.html" title="String (class)">String</a></span>&gt;</tt>) <strong>requires</strong> </span>
        <div class="docstring">
  <div class="discussion">
    <p>Returns the required libraries for this filter.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Enumerable.html" title="Enumerable (module)">Enumerable</a></span>&lt;<span class='object_link'><a href="../String.html" title="String (class)">String</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>This filter’s list of library names that are required</p>
</div>
      
    </li>
  
</ul>

</div>
      </li>
    
  </ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


87
88
89
90
91
92
93</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc/base/compilation/filter.rb', line 87</span>

<span class='kw'>def</span> <span class='id identifier rubyid_requires'>requires</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_requires'>requires</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_requires'>requires</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>&gt;</span> <span class='int'>0</span>
    <span class='ivar'>@requires</span> <span class='op'>=</span> <span class='id identifier rubyid_requires'>requires</span>
  <span class='kw'>else</span>
    <span class='ivar'>@requires</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="setup-class_method">
  
    + (<tt>void</tt>) <strong>setup</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>Requires the filter’s required library if necessary.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


98
99
100
101
102
103</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc/base/compilation/filter.rb', line 98</span>

<span class='kw'>def</span> <span class='id identifier rubyid_setup'>setup</span>
  <span class='ivar'>@setup</span> <span class='op'>||=</span> <span class='kw'>begin</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_requires'>requires</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_r'>r</span><span class='op'>|</span> <span class='id identifier rubyid_require'>require</span> <span class='id identifier rubyid_r'>r</span> <span class='rbrace'>}</span>
    <span class='kw'>true</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="to_binary?-class_method">
  
    + (<tt>Boolean</tt>) <strong>to_binary?</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>True if this filter results in a binary item
representation, false otherwise</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>True if this filter results in a binary item
representation, false otherwise</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


76
77
78</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc/base/compilation/filter.rb', line 76</span>

<span class='kw'>def</span> <span class='id identifier rubyid_to_binary?'>to_binary?</span>
  <span class='lparen'>(</span><span class='ivar'>@to</span> <span class='op'>||</span> <span class='symbol'>:text</span><span class='rparen'>)</span> <span class='op'>==</span> <span class='symbol'>:binary</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="type-class_method">
  
    + (<tt>void</tt>) <strong>type</strong>(arg) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>Sets the new type for the filter. The type can be <code>:binary</code> (default)
or <code>:text</code>. The given argument can either be a symbol indicating both
“from” and “to” types, or a hash where the only key is the “from” type
and the only value is the “to” type.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'><p>Specifying a text-to-text filter</p>
</div></p>
      
      <pre class="example code"><code>
<span class='id identifier rubyid_type'>type</span> <span class='symbol'>:text</span></code></pre>
    
      
        <p class="example_title"><div class='inline'><p>Specifying a text-to-binary filter</p>
</div></p>
      
      <pre class="example code"><code>
<span class='id identifier rubyid_type'>type</span> <span class='symbol'>:text</span> <span class='op'>=&gt;</span> <span class='symbol'>:binary</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>arg</span>
      
      
        <span class='type'>(<tt>Symbol</tt>, <tt><span class='object_link'><a href="../Hash.html" title="Hash (class)">Hash</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The new type of this filter</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


60
61
62
63
64
65
66</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc/base/compilation/filter.rb', line 60</span>

<span class='kw'>def</span> <span class='id identifier rubyid_type'>type</span><span class='lparen'>(</span><span class='id identifier rubyid_arg'>arg</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_arg'>arg</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Hash</span><span class='rparen'>)</span>
    <span class='ivar'>@from</span><span class='comma'>,</span> <span class='ivar'>@to</span> <span class='op'>=</span> <span class='id identifier rubyid_arg'>arg</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_arg'>arg</span><span class='period'>.</span><span class='id identifier rubyid_values'>values</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span>
  <span class='kw'>else</span>
    <span class='ivar'>@from</span><span class='comma'>,</span> <span class='ivar'>@to</span> <span class='op'>=</span> <span class='id identifier rubyid_arg'>arg</span><span class='comma'>,</span> <span class='id identifier rubyid_arg'>arg</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="depend_on-instance_method">
  
    - (<tt>void</tt>) <strong>depend_on</strong>(items) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>Creates a dependency from the item that is currently being filtered onto
the given collection of items. In other words, require the given items
to be compiled first before this items is processed.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>items</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="Item.html" title="Nanoc::Item (class)">Nanoc::Item</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The items that are depended on.</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


183
184
185
186
187
188
189
190
191
192
193
194
195</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc/base/compilation/filter.rb', line 183</span>

<span class='kw'>def</span> <span class='id identifier rubyid_depend_on'>depend_on</span><span class='lparen'>(</span><span class='id identifier rubyid_items'>items</span><span class='rparen'>)</span>
  <span class='comment'># Notify
</span>  <span class='id identifier rubyid_items'>items</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_item'>item</span><span class='op'>|</span>
    <span class='const'>Nanoc</span><span class='op'>::</span><span class='const'>NotificationCenter</span><span class='period'>.</span><span class='id identifier rubyid_post'>post</span><span class='lparen'>(</span><span class='symbol'>:visit_started</span><span class='comma'>,</span> <span class='id identifier rubyid_item'>item</span><span class='rparen'>)</span>
    <span class='const'>Nanoc</span><span class='op'>::</span><span class='const'>NotificationCenter</span><span class='period'>.</span><span class='id identifier rubyid_post'>post</span><span class='lparen'>(</span><span class='symbol'>:visit_ended</span><span class='comma'>,</span>   <span class='id identifier rubyid_item'>item</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='comment'># Raise unmet dependency error if necessary
</span>  <span class='id identifier rubyid_items'>items</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_item'>item</span><span class='op'>|</span>
    <span class='id identifier rubyid_rep'>rep</span> <span class='op'>=</span> <span class='id identifier rubyid_item'>item</span><span class='period'>.</span><span class='id identifier rubyid_reps'>reps</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_r'>r</span><span class='op'>|</span> <span class='op'>!</span><span class='id identifier rubyid_r'>r</span><span class='period'>.</span><span class='id identifier rubyid_compiled?'>compiled?</span> <span class='rbrace'>}</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>Nanoc</span><span class='op'>::</span><span class='const'>Errors</span><span class='op'>::</span><span class='const'>UnmetDependency</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_rep'>rep</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_rep'>rep</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="filename-instance_method">
  
    - (<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>) <strong>filename</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns the filename associated with the item that is being filtered.
  It is in the format <code>item &lt;identifier&gt; (rep &lt;name&gt;)</code>.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The filename</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


166
167
168
169
170
171
172
173
174</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc/base/compilation/filter.rb', line 166</span>

<span class='kw'>def</span> <span class='id identifier rubyid_filename'>filename</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_assigns'>assigns</span><span class='lbracket'>[</span><span class='symbol'>:layout</span><span class='rbracket'>]</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>layout </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_assigns'>assigns</span><span class='lbracket'>[</span><span class='symbol'>:layout</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_identifier'>identifier</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_assigns'>assigns</span><span class='lbracket'>[</span><span class='symbol'>:item</span><span class='rbracket'>]</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>item </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_assigns'>assigns</span><span class='lbracket'>[</span><span class='symbol'>:item</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_identifier'>identifier</span><span class='rbrace'>}</span><span class='tstring_content'> (rep </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_assigns'>assigns</span><span class='lbracket'>[</span><span class='symbol'>:item_rep</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='rbrace'>}</span><span class='tstring_content'>)</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>else</span>
    <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>?</span><span class='tstring_end'>'</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="output_filename-instance_method">
  
    - (<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>) <strong>output_filename</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns a filename that is used to write data to. This method is only
  used on binary items. When running a binary filter on a file, the
  resulting file must end up in the location returned by this method.</p>

<p>The returned filename will be absolute, so it is safe to change to
  another directory inside the filter.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The output filename</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


151
152
153
154
155
156
157
158
159
160</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc/base/compilation/filter.rb', line 151</span>

<span class='kw'>def</span> <span class='id identifier rubyid_output_filename'>output_filename</span>
  <span class='ivar'>@output_filename</span> <span class='op'>||=</span> <span class='kw'>begin</span>
    <span class='const'>FileUtils</span><span class='period'>.</span><span class='id identifier rubyid_mkdir_p'>mkdir_p</span><span class='lparen'>(</span><span class='const'>TMP_BINARY_ITEMS_DIR</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_tempfile'>tempfile</span> <span class='op'>=</span> <span class='const'>Tempfile</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='const'>TMP_BINARY_ITEMS_DIR</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_new_filename'>new_filename</span> <span class='op'>=</span> <span class='id identifier rubyid_tempfile'>tempfile</span><span class='period'>.</span><span class='id identifier rubyid_path'>path</span>
    <span class='id identifier rubyid_tempfile'>tempfile</span><span class='period'>.</span><span class='id identifier rubyid_close!'>close!</span>

    <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_expand_path'>expand_path</span><span class='lparen'>(</span><span class='id identifier rubyid_new_filename'>new_filename</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="run-instance_method">
  
    - (<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>, <tt>void</tt>) <strong>run</strong>(content_or_filename, params = {}) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <div class="note abstract">
  <strong>This method is abstract.</strong>
  <div class='inline'>
</div>
</div>
<p>Runs the filter on the given content or filename.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>content_or_filename</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The unprocessed content that should
be filtered (if the item is a textual item) or the path to the file
that should be filtered (if the item is a binary item)</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>params</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Hash.html" title="Hash (class)">Hash</a></span></tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>A hash containing parameters. Filter subclasses can
use these parameters to allow modifying the filter’s behaviour.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>, <tt>void</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>If the filter output binary content, the return
value is undefined; if the filter outputs textual content, the return
value will be the filtered content.</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>NotImplementedError</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


139
140
141</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc/base/compilation/filter.rb', line 139</span>

<span class='kw'>def</span> <span class='id identifier rubyid_run'>run</span><span class='lparen'>(</span><span class='id identifier rubyid_content_or_filename'>content_or_filename</span><span class='comma'>,</span> <span class='id identifier rubyid_params'>params</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>NotImplementedError</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Nanoc::Filter subclasses must implement #run</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="setup_and_run-instance_method">
  
    - (<tt>Object</tt>) <strong>setup_and_run</strong>(*args) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Sets up the filter and runs the filter. This method passes its arguments
to <span class='object_link'><a href="#run-instance_method" title="Nanoc::Filter#run (method)">#run</a></span> unchanged and returns the return value from <span class='object_link'><a href="#run-instance_method" title="Nanoc::Filter#run (method)">#run</a></span>.</p>


  </div>
</div>
<div class="tags">
  

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li>Nanoc::Filter.{{#run}</li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


120
121
122
123</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nanoc/base/compilation/filter.rb', line 120</span>

<span class='kw'>def</span> <span class='id identifier rubyid_setup_and_run'>setup_and_run</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_setup'>setup</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_run'>run</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

    
<script type="text/javascript">
    var _gaq = _gaq || [];
    var pluginUrl = '//www.google-analytics.com/plugins/ga/inpage_linkid.js';
    _gaq.push(['_require', 'inpage_linkid', pluginUrl]);
    _gaq.push(['_setAccount', 'UA-15639968-1']);
    _gaq.push(['_setDomainName', 'nanoc.ws']);
    _gaq.push(['_setAllowLinker', true]);
    _gaq.push(['_trackPageview']);

    (function() {
        var ga = document.createElement('script');
        ga.type = 'text/javascript';
        ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(ga, s);
     })();
</script>

  </body>
</html>